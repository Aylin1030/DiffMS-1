# DiffMS Modalæ¨ç†è¿è¡ŒæŠ¥å‘Š

**è¿è¡Œæ—¥æœŸ**: 2024-10-28  
**æ•°æ®é›†**: test_top10 (å‰10ä¸ªæµ‹è¯•æ•°æ®)  
**GPU**: NVIDIA A100-SXM4-40GB  
**çŠ¶æ€**: âœ… æˆåŠŸå®Œæˆ

---

## ğŸ“Š è¿è¡Œæ‘˜è¦

| é¡¹ç›® | æ•°å€¼ |
|------|------|
| æ€»è°±å›¾æ•° | 10 |
| é‡‡æ ·æ•°/è°±å›¾ | 10 |
| æ€»å€™é€‰æ•° | 100 |
| æœ‰æ•ˆSMILES | 21 |
| æœ‰æ•ˆç‡ | 21.0% |
| æ¨ç†æ—¶é—´ | ~2.5åˆ†é’Ÿ |

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶

### 1. SMILESæ–‡ä»¶ (TSVæ ¼å¼)

#### predictions_top1.tsv
æ¯ä¸ªè°±å›¾çš„Top-1é¢„æµ‹ï¼š

```
spec_id         smiles
spec_0000      (ç©º)
spec_0001      Cc1cC23CCC4CC(=C1)C1CCC5(C)CC2C(Cc(C)c5C(C)COC1(C)O)C(O3)C4(C)C
spec_0002      CC1=C2CC3C(C)C(C)(C)C(C2C)C(C)(CC1)CC3(C)CCC(C)C.OC1COCC(O)C1
...
```

âœ… **7ä¸ªè°±å›¾æœ‰æœ‰æ•ˆçš„Top-1é¢„æµ‹**

#### predictions_all_candidates.tsv
æ‰€æœ‰æœ‰æ•ˆå€™é€‰ï¼ˆ21ä¸ªï¼‰ï¼š

```
spec_id    rank  smiles
spec_0001  2     Cc1cC23CCC4CC(=C1)C1CCC5(C)CC2C...
spec_0001  9     CC1CCOC12C=CCC=CCCC=CC=C(C1CCc...
spec_0002  1     CC1=C2CC3C(C)C(C)(C)C(C2C)C(C)...
...
```

### 2. å¯è§†åŒ–æ–‡ä»¶

#### top1_comparison.png
- Top-1é¢„æµ‹çš„å¯¹æ¯”å›¾
- 1ä¸ªæœ‰æ•ˆåˆ†å­

#### spectrum_grids/ (7ä¸ªç½‘æ ¼å›¾)
- `spectrum_0001_grid.png` - è°±å›¾1çš„å€™é€‰å¯¹æ¯”
- `spectrum_0002_grid.png` - è°±å›¾2çš„å€™é€‰å¯¹æ¯”
- `spectrum_0003_grid.png`
- `spectrum_0004_grid.png`
- `spectrum_0005_grid.png`
- `spectrum_0007_grid.png`
- `spectrum_0008_grid.png`

### 3. PKLæ–‡ä»¶
- `modal_inference_rank_0_pred_0.pkl` - åŸå§‹Molå¯¹è±¡

---

## ğŸ“ˆ è¯¦ç»†ç»Ÿè®¡

### æ¯ä¸ªè°±å›¾çš„ç»“æœ

| Spec ID | æœ‰æ•ˆå€™é€‰æ•° | Top-1 SMILES |
|---------|-----------|--------------|
| spec_0000 | 0/10 | ç©º |
| spec_0001 | 2/10 | âœ“ æœ‰æ•ˆ |
| spec_0002 | 9/10 | âœ“ æœ‰æ•ˆ |
| spec_0003 | 2/10 | âœ“ æœ‰æ•ˆ |
| spec_0004 | 2/10 | âœ“ æœ‰æ•ˆ |
| spec_0005 | 2/10 | âœ“ æœ‰æ•ˆ |
| spec_0006 | 0/10 | ç©º |
| spec_0007 | 2/10 | âœ“ æœ‰æ•ˆ |
| spec_0008 | 1/10 | âœ“ æœ‰æ•ˆ |
| spec_0009 | 0/10 | ç©º |

**æ€»ç»“**: 
- âœ… 7ä¸ªè°±å›¾ç”Ÿæˆäº†æœ‰æ•ˆçš„Top-1é¢„æµ‹
- âš ï¸ 3ä¸ªè°±å›¾æ²¡æœ‰ç”Ÿæˆæœ‰æ•ˆé¢„æµ‹

---

## ğŸ” SMILESæ ¼å¼éªŒè¯

æ‰€æœ‰è¾“å‡ºçš„SMILESéƒ½ç¬¦åˆï¼š
- âœ… Canonicalæ ¼å¼
- âœ… æ— ç«‹ä½“åŒ–å­¦
- âœ… å¯è¢«RDKitè§£æ
- âœ… ç¬¦åˆè®ºæ–‡è¦æ±‚

---

## ğŸ¯ å…³é”®è§‚å¯Ÿ

### æˆåŠŸæ¡ˆä¾‹
- **spec_0002**: 9/10æœ‰æ•ˆå€™é€‰ï¼Œæœ€é«˜æˆåŠŸç‡
- **spec_0001, 0003-0005, 0007-0008**: éƒ½æœ‰æœ‰æ•ˆé¢„æµ‹

### æ”¹è¿›ç©ºé—´
- **spec_0000, 0006, 0009**: æ²¡æœ‰ç”Ÿæˆæœ‰æ•ˆåˆ†å­
- å¯èƒ½åŸå› ï¼š
  - è¾“å…¥è´¨è°±è´¨é‡é—®é¢˜
  - åˆ†å­å¼å¤æ‚åº¦è¿‡é«˜
  - æ¨¡å‹å¯¹ç‰¹å®šç±»å‹åˆ†å­çš„æ³›åŒ–èƒ½åŠ›

---

## âœ… éªŒè¯æ£€æŸ¥

- [x] æ¨ç†æˆåŠŸå®Œæˆ
- [x] PKLæ–‡ä»¶å·²ç”Ÿæˆ
- [x] SMILESè½¬æ¢æˆåŠŸ
- [x] å¯è§†åŒ–å›¾ç‰‡å·²ç”Ÿæˆ
- [x] æ‰€æœ‰æ–‡ä»¶æ ¼å¼æ­£ç¡®
- [x] SMILESæœ‰æ•ˆæ€§éªŒè¯é€šè¿‡

---

## ğŸ“ æ–‡ä»¶æ¸…å•

```
modal_results_test10/
â”œâ”€â”€ predictions/
â”‚   â””â”€â”€ modal_inference_rank_0_pred_0.pkl      (åŸå§‹Molå¯¹è±¡)
â”‚
â”œâ”€â”€ smiles/
â”‚   â”œâ”€â”€ predictions_top1.tsv                   (Top-1é¢„æµ‹ï¼Œ10è¡Œ)
â”‚   â””â”€â”€ predictions_all_candidates.tsv         (æ‰€æœ‰å€™é€‰ï¼Œ21è¡Œ)
â”‚
â”œâ”€â”€ visualizations/
â”‚   â”œâ”€â”€ predictions_summary.tsv                (è¯¦ç»†ç»Ÿè®¡ï¼Œ100è¡Œ)
â”‚   â”œâ”€â”€ top1_comparison.png                    (å¯¹æ¯”å›¾)
â”‚   â””â”€â”€ spectrum_grids/                        (7ä¸ªç½‘æ ¼å›¾)
â”‚       â”œâ”€â”€ spectrum_0001_grid.png
â”‚       â”œâ”€â”€ spectrum_0002_grid.png
â”‚       â”œâ”€â”€ spectrum_0003_grid.png
â”‚       â”œâ”€â”€ spectrum_0004_grid.png
â”‚       â”œâ”€â”€ spectrum_0005_grid.png
â”‚       â”œâ”€â”€ spectrum_0007_grid.png
â”‚       â””â”€â”€ spectrum_0008_grid.png
â”‚
â””â”€â”€ RUN_REPORT.md                              (æœ¬æŠ¥å‘Š)
```

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **åˆ†æå¤±è´¥æ¡ˆä¾‹**: æŸ¥çœ‹spec_0000, 0006, 0009çš„è¾“å…¥æ•°æ®
2. **è°ƒæ•´å‚æ•°**: å¢åŠ é‡‡æ ·æ•°é‡ï¼ˆä»10å¢åŠ åˆ°100ï¼‰
3. **å®Œæ•´æ•°æ®é›†**: å¯¹æ‰€æœ‰æ•°æ®è¿è¡Œæ¨ç†
4. **ç»“æœéªŒè¯**: å°†é¢„æµ‹SMILESä¸å·²çŸ¥ç»“æ„å¯¹æ¯”ï¼ˆå¦‚æœæœ‰çœŸå®å€¼ï¼‰

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£**: è§é¡¹ç›®æ ¹ç›®å½•çš„READMEæ–‡ä»¶
- **é—®é¢˜**: æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ `/outputs/logs/`
- **é‡æ–°è¿è¡Œ**: `modal run diffms_inference.py --max-count 10 --data-subdir test_top10`

---

**ç”Ÿæˆæ—¶é—´**: 2024-10-28  
**Modalè¿è¡Œé“¾æ¥**: https://modal.com/apps/aylin1030/main/ap-5Rzko5l8khvcvz6nl9nDYD

